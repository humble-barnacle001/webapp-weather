const storage=new Storage;storage.get();const weather=new Weather(storage.city),ui=new UI;let currentRES;function changeTheme(){"css/light.min.css"===document.getElementById("theme").getAttribute("href")?darkThemeSet():lightThemeSet()}function darkThemeSet(){document.getElementById("theme").setAttribute("href","css/dark.min.css"),document.getElementById("themeChanger").setAttribute("fill","#fff"),storage.setTheme("dark")}function lightThemeSet(){document.getElementById("theme").setAttribute("href","css/light.min.css"),document.getElementById("themeChanger").setAttribute("fill","#333"),storage.setTheme("light")}function changeLoc(e){e.preventDefault();let t=weather.city;weather.changeLocation(document.getElementById("city").value),weather.getWeather().then(e=>{e.error?(ui.paintAlert(weather.city),weather.changeLocation(t),storage.setLocation(t)):(ui.paint(e,storage),currentRES=e,storage.setLocation(weather.city))}).catch(e=>console.error(e)),$("#locModal").modal("hide"),document.getElementById("city").value=""}function changeTmpUnit(){document.getElementById("unitC").checked?(ui.changeTmpUnit("C",currentRES),storage.setTempUnit("C")):(ui.changeTmpUnit("F",currentRES),storage.setTempUnit("F")),$("#locModal1").modal("hide")}function getWeather(){weather.getWeather().then(e=>{e.error?ui.paintAlert(weather.city):(ui.paint(e,storage),currentRES=e)}).catch(e=>console.error(e))}"light"==storage.theme?lightThemeSet():darkThemeSet(),document.getElementById("themeChanger").addEventListener("click",e=>{e.preventDefault(),changeTheme()}),document.querySelector(".toTop").addEventListener("click",()=>window.scrollTo(0,0)),document.getElementById("top-alert-closer").addEventListener("click",()=>ui.closeAlert()),document.addEventListener("DOMContentLoaded",getWeather),document.getElementById("w-form").addEventListener("submit",changeLoc),document.getElementById("w-change-loc").addEventListener("click",changeLoc),document.getElementById("btnDetails").addEventListener("click",e=>ui.paintDetails(e,currentRES,storage)),document.getElementById("btnClsDetails").addEventListener("click",()=>ui.removeDetails()),document.getElementById("tmp-form").addEventListener("submit",changeTmpUnit),document.getElementById("tmpChangeBtn").addEventListener("click",changeTmpUnit);